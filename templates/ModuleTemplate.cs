/*
 * ??????????????????????????????????????????????????????????????????????????????
 * TEMPLATE DE MODULE OPEN ASPHALTE
 * ??????????????????????????????????????????????????????????????????????????????
 *
 * Ce fichier sert de modèle pour créer un nouveau module Open Asphalte.
 *
 * INSTRUCTIONS:
 * 1. Créez un nouveau projet avec le nom OpenAsphalte.{VotreModule}
 * 2. Copiez ce fichier et CommandTemplate.cs dans votre projet
 * 3. Copiez OpenAsphalte.Module.Template.csproj et adaptez-le
 * 4. Renommez les classes et namespaces selon votre module
 * 5. Implémentez GetCommandTypes() pour retourner vos commandes
 * 6. Implémentez GetTranslations() pour vos traductions FR/EN/ES
 *
 * RAPPEL: Le nom de l'assembly DOIT commencer par "OpenAsphalte." pour être détecté.
 *
 * Documentation complète: DEVELOPER.md
 */

using OpenAsphalte.Abstractions;

namespace OpenAsphalte.Modules.MonModule;

/// <summary>
/// Module exemple pour Open Asphalte.
/// Remplacez "MonModule" par le nom de votre module.
/// </summary>
public class MonModuleModule : ModuleBase
{
    // ??????????????????????????????????????????????????????????????
    // IDENTIFICATION DU MODULE
    // ??????????????????????????????????????????????????????????????

    /// <summary>
    /// Identifiant unique du module (minuscules, sans espaces)
    /// </summary>
    public override string Id => "monmodule";

    /// <summary>
    /// Nom affiché dans les menus et rubans
    /// </summary>
    public override string Name => "My Module";

    /// <summary>
    /// Description du module
    /// </summary>
    public override string Description => "Description of my custom module";

    /// <summary>
    /// Version du module (format semver)
    /// </summary>
    public override string Version => "1.0.0";

    /// <summary>
    /// Auteur(s) du module
    /// </summary>
    public override string Author => "Your Name";

    // ??????????????????????????????????????????????????????????????
    // AFFICHAGE UI
    // ??????????????????????????????????????????????????????????????

    /// <summary>
    /// Ordre d'affichage (1-899 pour modules utilisateur, 900+ système)
    /// </summary>
    public override int Order => 50;

    /// <summary>
    /// Clé de traduction pour le nom (optionnel, pour multilingue)
    /// </summary>
    public override string? NameKey => "monmodule.name";

    /// <summary>
    /// Chemin de l'icône 32x32 (optionnel)
    /// Format: "pack://application:,,,/OpenAsphalte.MonModule;component/Resources/icon.png"
    /// </summary>
    public override string? IconPath => null;

    // ??????????????????????????????????????????????????????????????
    // DÉPENDANCES (optionnel)
    // ??????????????????????????????????????????????????????????????

    /// <summary>
    /// Liste des modules requis (par leur Id)
    /// Le module ne sera pas chargé si une dépendance est manquante
    /// </summary>
    public override IReadOnlyList<string> Dependencies => Array.Empty<string>();
    // Exemple: public override IReadOnlyList<string> Dependencies => new[] { "voirie" };

    /// <summary>
    /// Version minimale du Core requise
    /// </summary>
    public override string MinCoreVersion => "1.0.0";

    // ??????????????????????????????????????????????????????????????????
    // CYCLE DE VIE
    // ??????????????????????????????????????????????????????????????????

    /// <summary>
    /// Appelé lors du chargement du module
    /// </summary>
    public override void Initialize()
    {
        base.Initialize();
        // Ajoutez ici votre code d'initialisation
        // Exemple: charger des ressources, initialiser des services

        // Optionnel: S'abonner aux changements de langue pour mettre à jour l'UI personnalisée
        // Localization.Localization.OnLanguageChanged += OnLanguageChanged;
    }

    /// <summary>
    /// Appelé lors de la fermeture du plugin
    /// </summary>
    public override void Shutdown()
    {
        // Ajoutez ici votre code de nettoyage
        // Exemple: libérer des ressources, sauvegarder des données

        // Se désabonner des événements
        // Localization.Localization.OnLanguageChanged -= OnLanguageChanged;

        base.Shutdown();
    }

    // /// <summary>
    // /// Appelé quand l'utilisateur change de langue (optionnel)
    // /// </summary>
    // private void OnLanguageChanged(string oldLang, string newLang)
    // {
    //     // Mettre à jour les UI personnalisées du module si nécessaire
    //     // Le menu et le ruban du Core sont mis à jour automatiquement
    // }

    // ??????????????????????????????????????????????????????????????????
    // COMMANDES
    // ??????????????????????????????????????????????????????????????????

    /// <summary>
    /// Retourne tous les types contenant des commandes [CommandMethod]
    /// </summary>
    public override IEnumerable<Type> GetCommandTypes()
    {
        return new[]
        {
            typeof(Commands.ExempleCommand),
            // Ajoutez vos autres classes de commandes ici
        };
    }

    // ??????????????????????????????????????????????????????????????????
    // TRADUCTIONS (OBLIGATOIRE pour les 3 langues: fr, en, es)
    // ??????????????????????????????????????????????????????????????????

    /// <summary>
    /// Retourne les traductions spécifiques au module.
    /// </summary>
    /// <remarks>
    /// <para>
    /// Les traductions sont automatiquement chargées par le Core au démarrage.
    /// Le système utilise la langue définie par l'utilisateur dans les paramètres.
    /// </para>
    /// <para>
    /// IMPORTANT: Fournissez les traductions pour les 3 langues supportées (fr, en, es).
    /// Si une traduction manque, le français sera utilisé par défaut.
    /// </para>
    /// <para>
    /// Convention de nommage des clés: {moduleId}.{section}.{key}
    /// Exemple: "voirie.parking.title"
    /// </para>
    /// </remarks>
    public override IDictionary<string, IDictionary<string, string>> GetTranslations()
    {
        return new Dictionary<string, IDictionary<string, string>>
        {
            // === FRANÇAIS ===
            ["fr"] = new Dictionary<string, string>
            {
                ["monmodule.name"] = "Mon Module",
                ["monmodule.exemple.title"] = "Commande Exemple",
                ["monmodule.exemple.desc"] = "Description de la commande exemple",
                ["monmodule.exemple.success"] = "Opération réussie !",
            },

            // === ENGLISH ===
            ["en"] = new Dictionary<string, string>
            {
                ["monmodule.name"] = "My Module",
                ["monmodule.exemple.title"] = "Example Command",
                ["monmodule.exemple.desc"] = "Description of the example command",
                ["monmodule.exemple.success"] = "Operation successful!",
            },

            // === ESPAÑOL ===
            ["es"] = new Dictionary<string, string>
            {
                ["monmodule.name"] = "Mi Módulo",
                ["monmodule.exemple.title"] = "Comando Ejemplo",
                ["monmodule.exemple.desc"] = "Descripción del comando ejemplo",
                ["monmodule.exemple.success"] = "¡Operación exitosa!",
            }
        };
    }
}
